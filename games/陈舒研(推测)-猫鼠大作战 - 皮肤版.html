<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>猫鼠大作战 - 皮肤版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        mouse: '#FF6B35',
                        mouseLight: '#FF8A65',
                        cat: '#4ECDC4',
                        catLight: '#80DEEA',
                        cheese: '#FFD166',
                        cheeseDark: '#FFB300',
                        bgDark: '#1A202C',
                        bgLight: '#2D3748',
                        accent: '#E63946',
                        neonPink: '#FF2E63',
                        neonBlue: '#08D9D6',
                        neonYellow: '#FFD166',
                        forestGreen: '#00A878',
                        forestBrown: '#8B4513',
                        halloweenOrange: '#FF7D00',
                        halloweenPurple: '#9D4EDD'
                    },
                    fontFamily: {
                        game: ['"Comic Sans MS"', '"Bubblegum Sans"', 'cursive']
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'pulse-soft': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-slow': 'bounce 4s infinite',
                        'wiggle': 'wiggle 1s ease-in-out infinite',
                        'glow': 'glow 2s ease-in-out infinite alternate'
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' }
                        },
                        wiggle: {
                            '0%, 100%': { transform: 'rotate(-3deg)' },
                            '50%': { transform: 'rotate(3deg)' }
                        },
                        glow: {
                            '0%': { boxShadow: '0 0 5px rgba(255, 46, 99, 0.5)' },
                            '100%': { boxShadow: '0 0 20px rgba(255, 46, 99, 0.8), 0 0 30px rgba(8, 217, 214, 0.6)' }
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            }
            .text-shadow-lg {
                text-shadow: 0 4px 8px rgba(0, 0, 0, 0.5), 0 2px 4px rgba(0, 0, 0, 0.3);
            }
            .glow {
                filter: drop-shadow(0 0 8px currentColor);
            }
            .btn-hover {
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }
            .btn-hover:hover {
                transform: translateY(-3px) scale(1.05);
                box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
            }
            .card-hover {
                transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            }
            .card-hover:hover {
                transform: translateY(-5px);
                box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
            }
            .skin-active {
                border: 3px solid #FFD166;
                box-shadow: 0 0 15px rgba(255, 209, 102, 0.6);
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap" rel="stylesheet">
</head>
<body class="bg-gradient-to-br from-bgDark via-gray-800 to-bgLight text-white min-h-screen overflow-x-hidden flex flex-col items-center justify-center p-4 font-game">
<!-- 返回主页按钮 -->
<div id="homeNavigation" style="position: fixed; top: 20px; left: 20px; z-index: 9999;">
    <a href="../index.html" 
       style="display: inline-flex; align-items: center; gap: 8px; 
              background: linear-gradient(135deg, #FF6B6B, #4ECDC4); 
              color: white; padding: 12px 20px; border-radius: 25px; 
              text-decoration: none; font-family: 'Microsoft YaHei', sans-serif; 
              font-weight: bold; font-size: 14px; 
              box-shadow: 0 4px 15px rgba(0,0,0,0.2); 
              transition: all 0.3s ease;
              backdrop-filter: blur(10px);"
       onmouseover="this.style.transform='translateY(-2px) scale(1.05)'; this.style.boxShadow='0 6px 20px rgba(0,0,0,0.3)';"
       onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 4px 15px rgba(0,0,0,0.2)';">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
        </svg>
        返回星球工坊
    </a>
</div>

    <!-- 装饰元素 -->
    <div class="fixed -top-20 -left-20 w-64 h-64 bg-mouse/10 rounded-full blur-3xl"></div>
    <div class="fixed -bottom-32 -right-32 w-96 h-96 bg-cat/10 rounded-full blur-3xl"></div>
    
    <div class="max-w-5xl w-full mx-auto relative z-10">
        <!-- 游戏卡片容器 -->
        <div class="bg-gradient-to-b from-bgDark/80 to-bgLight/80 backdrop-blur-xl rounded-3xl shadow-2xl overflow-hidden border border-white/10 transform transition-all duration-700 hover:shadow-mouse/10 hover:shadow-cat/10">
            
            <!-- 顶部装饰条 -->
            <div class="h-2 bg-gradient-to-r from-mouse via-cheese to-cat"></div>
            
            <!-- 游戏标题 -->
            <header class="px-6 py-5 border-b border-white/10 bg-gradient-to-r from-bgDark/90 to-transparent">
                <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                    <h1 class="text-[clamp(1.8rem,4vw,3rem)] font-game text-cheese text-shadow-lg flex items-center animate-float">
                        <i class="fa fa-paw mr-3 text-mouse animate-pulse-soft glow"></i>
                        猫鼠大作战
                        <i class="fa fa-paw ml-3 text-cat animate-pulse-soft glow"></i>
                    </h1>
                    <div class="flex items-center gap-6">
                        <div class="flex items-center bg-mouse/20 px-4 py-2 rounded-full border border-mouse/30 backdrop-blur-sm transform transition-all duration-300 hover:bg-mouse/30">
                            <div class="w-6 h-6 bg-mouse rounded-full mr-2 border border-mouseLight"></div>
                            <span class="font-game text-lg">老鼠: <span id="score" class="font-bold text-mouseLight">0</span></span>
                        </div>
                        <div class="flex items-center bg-cat/20 px-4 py-2 rounded-full border border-cat/30 backdrop-blur-sm transform transition-all duration-300 hover:bg-cat/30">
                            <div class="w-6 h-6 bg-cat rounded-full mr-2 border border-catLight"></div>
                            <span class="font-game text-lg">猫: <span id="catScore" class="font-bold text-catLight">0</span></span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- 游戏区域 -->
            <main class="relative">
                <canvas id="gameCanvas" class="w-full h-[65vh] bg-bgDark rounded-b-lg"></canvas>
                
                <!-- 游戏开始界面 -->
                <div id="startScreen" class="absolute inset-0 flex flex-col items-center justify-center bg-bgDark/80 backdrop-blur-md z-10 transition-all duration-500">
                    <div class="text-center max-w-4xl mx-auto p-6 md:p-8 bg-gradient-to-b from-bgDark/90 to-bgLight/70 rounded-2xl border border-white/10 shadow-2xl transform animate-float card-hover">
                        <h2 class="text-[clamp(2.2rem,6vw,4rem)] font-game text-mouse text-shadow-lg mb-6 animate-wiggle">
                            猫鼠大作战
                        </h2>
                        
                        <!-- 皮肤选择区域 -->
                        <div class="mb-8">
                            <h3 class="text-xl text-cheese font-game mb-4">选择角色皮肤</h3>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                <!-- 老鼠皮肤 -->
                                <div class="bg-bgDark/60 p-4 rounded-xl border border-white/10">
                                    <h4 class="text-mouse text-lg mb-3">老鼠皮肤</h4>
                                    <div class="grid grid-cols-2 gap-2">
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover skin-active" data-skin="mouse" data-type="classic">
                                            <div class="w-16 h-16 mx-auto rounded-full bg-mouse/30 flex items-center justify-center mb-1">
                                                <div class="w-10 h-10 rounded-full bg-mouse"></div>
                                            </div>
                                            <span class="text-xs">经典</span>
                                        </div>
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover" data-skin="mouse" data-type="neon">
                                            <div class="w-16 h-16 mx-auto rounded-full bg-neonPink/30 flex items-center justify-center mb-1">
                                                <div class="w-10 h-10 rounded-full bg-neonPink"></div>
                                            </div>
                                            <span class="text-xs">霓虹</span>
                                        </div>
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover" data-skin="mouse" data-type="forest">
                                            <div class="w-16 h-16 mx-auto rounded-full bg-forestBrown/30 flex items-center justify-center mb-1">
                                                <div class="w-10 h-10 rounded-full bg-forestBrown"></div>
                                            </div>
                                            <span class="text-xs">森林</span>
                                        </div>
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover" data-skin="mouse" data-type="halloween">
                                            <div class="w-16 h-16 mx-auto rounded-full bg-halloweenOrange/30 flex items-center justify-center mb-1">
                                                <div class="w-10 h-10 rounded-full bg-halloweenOrange"></div>
                                            </div>
                                            <span class="text-xs">万圣节</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 猫皮肤 -->
                                <div class="bg-bgDark/60 p-4 rounded-xl border border-white/10">
                                    <h4 class="text-cat text-lg mb-3">猫皮肤</h4>
                                    <div class="grid grid-cols-2 gap-2">
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover skin-active" data-skin="cat" data-type="classic">
                                            <div class="w-16 h-16 mx-auto rounded-full bg-cat/30 flex items-center justify-center mb-1">
                                                <div class="w-10 h-10 rounded-full bg-cat"></div>
                                            </div>
                                            <span class="text-xs">经典</span>
                                        </div>
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover" data-skin="cat" data-type="neon">
                                            <div class="w-16 h-16 mx-auto rounded-full bg-neonBlue/30 flex items-center justify-center mb-1">
                                                <div class="w-10 h-10 rounded-full bg-neonBlue"></div>
                                            </div>
                                            <span class="text-xs">霓虹</span>
                                        </div>
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover" data-skin="cat" data-type="forest">
                                            <div class="w-16 h-16 mx-auto rounded-full bg-forestGreen/30 flex items-center justify-center mb-1">
                                                <div class="w-10 h-10 rounded-full bg-forestGreen"></div>
                                            </div>
                                            <span class="text-xs">森林</span>
                                        </div>
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover" data-skin="cat" data-type="halloween">
                                            <div class="w-16 h-16 mx-auto rounded-full bg-halloweenPurple/30 flex items-center justify-center mb-1">
                                                <div class="w-10 h-10 rounded-full bg-halloweenPurple"></div>
                                            </div>
                                            <span class="text-xs">万圣节</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 奶酪皮肤 -->
                                <div class="bg-bgDark/60 p-4 rounded-xl border border-white/10">
                                    <h4 class="text-cheese text-lg mb-3">奶酪皮肤</h4>
                                    <div class="grid grid-cols-2 gap-2">
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover skin-active" data-skin="cheese" data-type="classic">
                                            <div class="w-16 h-16 mx-auto rounded-full bg-cheese/30 flex items-center justify-center mb-1">
                                                <div class="w-10 h-10 flex items-center justify-center">
                                                    <svg viewBox="0 0 40 40" width="100%" height="100%">
                                                        <polygon points="20,0 40,13 40,27 20,40 0,27 0,13" fill="#FFD166"/>
                                                        <circle cx="10" cy="10" r="3" fill="#FFB300"/>
                                                        <circle cx="30" cy="20" r="3" fill="#FFB300"/>
                                                        <circle cx="20" cy="30" r="3" fill="#FFB300"/>
                                                    </svg>
                                                </div>
                                            </div>
                                            <span class="text-xs">经典</span>
                                        </div>
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover" data-skin="cheese" data-type="neon">
                                            <div class="w-16 h-16 mx-auto rounded-full bg-neonYellow/30 flex items-center justify-center mb-1">
                                                <div class="w-10 h-10 flex items-center justify-center">
                                                    <svg viewBox="0 0 40 40" width="100%" height="100%">
                                                        <polygon points="20,0 40,13 40,27 20,40 0,27 0,13" fill="#FFD166" filter="drop-shadow(0 0 3px #FFD166)"/>
                                                        <circle cx="10" cy="10" r="3" fill="#FFB300"/>
                                                        <circle cx="30" cy="20" r="3" fill="#FFB300"/>
                                                        <circle cx="20" cy="30" r="3" fill="#FFB300"/>
                                                    </svg>
                                                </div>
                                            </div>
                                            <span class="text-xs">霓虹</span>
                                        </div>
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover" data-skin="cheese" data-type="forest">
                                            <div class="w-16 h-16 mx-auto rounded-full bg-forestBrown/30 flex items-center justify-center mb-1">
                                                <div class="w-10 h-10 flex items-center justify-center">
                                                    <svg viewBox="0 0 40 40" width="100%" height="100%">
                                                        <polygon points="20,0 40,13 40,27 20,40 0,27 0,13" fill="#8B4513"/>
                                                        <circle cx="10" cy="10" r="3" fill="#603813"/>
                                                        <circle cx="30" cy="20" r="3" fill="#603813"/>
                                                        <circle cx="20" cy="30" r="3" fill="#603813"/>
                                                    </svg>
                                                </div>
                                            </div>
                                            <span class="text-xs">坚果</span>
                                        </div>
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover" data-skin="cheese" data-type="halloween">
                                            <div class="w-16 h-16 mx-auto rounded-full bg-halloweenOrange/30 flex items-center justify-center mb-1">
                                                <div class="w-10 h-10 flex items-center justify-center">
                                                    <svg viewBox="0 0 40 40" width="100%" height="100%">
                                                        <circle cx="20" cy="20" r="20" fill="#FF7D00"/>
                                                        <path d="M15,15 Q20,12 25,15" fill="none" stroke="#000" stroke-width="2"/>
                                                        <path d="M12,25 L18,28 M22,28 L28,25" fill="none" stroke="#000" stroke-width="2"/>
                                                        <path d="M15,30 Q20,33 25,30" fill="none" stroke="#000" stroke-width="2"/>
                                                    </svg>
                                                </div>
                                            </div>
                                            <span class="text-xs">南瓜</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 背景皮肤 -->
                                <div class="bg-bgDark/60 p-4 rounded-xl border border-white/10">
                                    <h4 class="text-cat text-lg mb-3">背景皮肤</h4>
                                    <div class="grid grid-cols-2 gap-2">
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover skin-active" data-skin="background" data-type="classic">
                                            <div class="w-16 h-16 mx-auto rounded-lg bg-gradient-to-br from-green-900 to-green-800 flex items-center justify-center mb-1">
                                                <div class="w-14 h-14 flex flex-wrap">
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                </div>
                                            </div>
                                            <span class="text-xs">草地</span>
                                        </div>
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover" data-skin="background" data-type="neon">
                                            <div class="w-16 h-16 mx-auto rounded-lg bg-gradient-to-br from-purple-900 to-blue-900 flex items-center justify-center mb-1">
                                                <div class="w-14 h-14 flex flex-wrap">
                                                    <div class="w-1/3 h-1/3 bg-neonPink/20 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-neonBlue/20 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-neonPink/20 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-neonBlue/20 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-neonPink/20 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-neonBlue/20 rounded-sm"></div>
                                                </div>
                                            </div>
                                            <span class="text-xs">霓虹</span>
                                        </div>
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover" data-skin="background" data-type="forest">
                                            <div class="w-16 h-16 mx-auto rounded-lg bg-gradient-to-br from-forestGreen to-forestBrown flex items-center justify-center mb-1">
                                                <div class="w-14 h-14 flex flex-wrap">
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                </div>
                                            </div>
                                            <span class="text-xs">森林</span>
                                        </div>
                                        <div class="skin-option bg-bgLight/50 rounded-lg p-2 cursor-pointer text-center card-hover" data-skin="background" data-type="halloween">
                                            <div class="w-16 h-16 mx-auto rounded-lg bg-gradient-to-br from-halloweenOrange to-halloweenPurple flex items-center justify-center mb-1">
                                                <div class="w-14 h-14 flex flex-wrap">
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                    <div class="w-1/3 h-1/3 bg-white/5 rounded-sm"></div>
                                                </div>
                                            </div>
                                            <span class="text-xs">万圣节</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <div class="bg-bgDark/60 p-5 rounded-xl border border-mouse/20 transform transition-all duration-300 hover:border-mouse/40 hover:bg-mouse/5 backdrop-blur-sm">
                                <h3 class="text-xl text-mouse font-game mb-3 flex items-center">
                                    <i class="fa fa-rat mr-2"></i>老鼠 (玩家1)
                                </h3>
                                <p class="text-gray-200 leading-relaxed">
                                    使用<span class="text-cheese font-bold">方向键</span>或<span class="text-cheese font-bold">WASD</span>移动，
                                    躲避猫的追捕并收集美味的奶酪得分！
                                </p>
                            </div>
                            <div class="bg-bgDark/60 p-5 rounded-xl border border-cat/20 transform transition-all duration-300 hover:border-cat/40 hover:bg-cat/5 backdrop-blur-sm">
                                <h3 class="text-xl text-cat font-game mb-3 flex items-center">
                                    <i class="fa fa-cat mr-2"></i>猫 (玩家2)
                                </h3>
                                <p class="text-gray-200 leading-relaxed">
                                    使用<span class="text-cheese font-bold">IJKL</span>键移动（I上、K下、J左、L右），
                                    抓住狡猾的老鼠获得更高分数！
                                </p>
                            </div>
                        </div>
                        <button id="startButton" class="bg-gradient-to-r from-mouse to-accent text-white font-game text-xl py-3 px-10 rounded-full btn-hover focus:outline-none focus:ring-2 focus:ring-mouse/50 shadow-lg">
                            <i class="fa fa-play-circle mr-2"></i>开始游戏
                        </button>
                    </div>
                </div>
                
                <!-- 游戏结束界面 -->
                <div id="gameOverScreen" class="absolute inset-0 flex-col items-center justify-center bg-bgDark/80 backdrop-blur-md z-10 hidden transition-all duration-500">
                    <div class="text-center max-w-2xl mx-auto p-6 md:p-8 bg-gradient-to-b from-bgDark/90 to-bgLight/70 rounded-2xl border border-white/10 shadow-2xl transform animate-float card-hover">
                        <h2 class="text-[clamp(2.2rem,6vw,4rem)] font-game text-accent text-shadow-lg mb-4 animate-wiggle">
                            游戏结束！
                        </h2>
                        <div class="mb-6 space-y-3">
                            <p class="text-2xl text-gray-200">
                                老鼠得分: <span id="finalMouseScore" class="text-mouseLight font-bold">0</span>
                            </p>
                            <p class="text-2xl text-gray-200">
                                猫得分: <span id="finalCatScore" class="text-catLight font-bold">0</span>
                            </p>
                        </div>
                        <p id="winnerText" class="text-2xl font-game mb-8 text-cheese glow"></p>
                        <button id="restartButton" class="bg-gradient-to-r from-cat to-mouse text-white font-game text-xl py-3 px-10 rounded-full btn-hover focus:outline-none focus:ring-2 focus:ring-cat/50 shadow-lg">
                            <i class="fa fa-redo mr-2"></i>再来一局
                        </button>
                    </div>
                </div>
            </main>

            <!-- 游戏控制和说明 -->
            <footer class="px-6 py-4 border-t border-white/10 bg-gradient-to-r from-transparent to-bgDark/90">
                <div class="flex flex-wrap justify-between items-center gap-4">
                    <div class="flex flex-wrap items-center gap-8">
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-mouse/20 flex items-center justify-center mr-3 border border-mouse/30">
                                <i class="fa fa-keyboard-o text-mouse"></i>
                            </div>
                            <span class="text-sm text-gray-300">WASD/方向键 - 老鼠移动</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-cat/20 flex items-center justify-center mr-3 border border-cat/30">
                                <i class="fa fa-keyboard-o text-cat"></i>
                            </div>
                            <span class="text-sm text-gray-300">IJKL - 猫移动</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-full bg-cheese/20 flex items-center justify-center mr-3 border border-cheese/30">
                                <i class="fa fa-clock-o text-cheese"></i>
                            </div>
                            <span class="text-sm text-gray-300">游戏时长: 60秒</span>
                        </div>
                    </div>
                    <div class="text-sm text-gray-400">
                        <p>猫鼠大作战 © 2025 | 精心设计的双人游戏体验</p>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <script>
        // 游戏初始化
        document.addEventListener('DOMContentLoaded', () => {
            // 获取DOM元素
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            const startScreen = document.getElementById('startScreen');
            const gameOverScreen = document.getElementById('gameOverScreen');
            const startButton = document.getElementById('startButton');
            const restartButton = document.getElementById('restartButton');
            const scoreDisplay = document.getElementById('score');
            const catScoreDisplay = document.getElementById('catScore');
            const finalMouseScoreDisplay = document.getElementById('finalMouseScore');
            const finalCatScoreDisplay = document.getElementById('finalCatScore');
            const winnerText = document.getElementById('winnerText');
            
            // 皮肤系统
            const skins = {
                mouse: 'classic',
                cat: 'classic',
                cheese: 'classic',
                background: 'classic'
            };
            
            // 皮肤选择事件
            document.querySelectorAll('.skin-option').forEach(option => {
                option.addEventListener('click', () => {
                    const skinType = option.getAttribute('data-skin');
                    const skinValue = option.getAttribute('data-type');
                    
                    // 移除同类型的所有active状态
                    document.querySelectorAll(`.skin-option[data-skin="${skinType}"]`).forEach(el => {
                        el.classList.remove('skin-active');
                    });
                    
                    // 添加当前选择的active状态
                    option.classList.add('skin-active');
                    
                    // 更新皮肤设置
                    skins[skinType] = skinValue;
                });
            });

            // 粒子效果类
            class Particle {
                constructor(x, y, color, size, type = 'circle') {
                    this.x = x;
                    this.y = y;
                    this.color = color;
                    this.size = size;
                    this.speedX = (Math.random() - 0.5) * 6;
                    this.speedY = (Math.random() - 0.5) * 6;
                    this.life = 1;
                    this.lifeLoss = 0.03 + Math.random() * 0.02;
                    this.type = type; // circle, square
                    this.rotation = Math.random() * Math.PI * 2;
                    this.rotationSpeed = (Math.random() - 0.5) * 0.1;
                }
                
                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;
                    this.life -= this.lifeLoss;
                    this.size *= 0.95;
                    this.rotation += this.rotationSpeed;
                }
                
                draw() {
                    ctx.save();
                    ctx.globalAlpha = this.life;
                    ctx.fillStyle = this.color;
                    ctx.translate(this.x, this.y);
                    ctx.rotate(this.rotation);
                    
                    if (this.type === 'circle') {
                        ctx.beginPath();
                        ctx.arc(0, 0, this.size, 0, Math.PI * 2);
                        ctx.fill();
                    } else {
                        ctx.fillRect(-this.size/2, -this.size/2, this.size, this.size);
                    }
                    
                    ctx.restore();
                }
            }
            
            // 特效类 - 用于显示临时效果
            class Effect {
                constructor(x, y, type) {
                    this.x = x;
                    this.y = y;
                    this.type = type; // splash, spark, pop
                    this.life = 1;
                    this.lifeLoss = 0.05;
                    this.size = 20 + Math.random() * 10;
                }
                
                update() {
                    this.life -= this.lifeLoss;
                    return this.life > 0;
                }
                
                draw() {
                    if (this.type === 'splash') {
                        ctx.save();
                        ctx.globalAlpha = this.life;
                        ctx.strokeStyle = getCheeseColor();
                        ctx.lineWidth = 2;
                        
                        for (let i = 0; i < 8; i++) {
                            const angle = i * Math.PI / 4;
                            const distance = this.size * (1 - this.life);
                            
                            ctx.beginPath();
                            ctx.moveTo(this.x, this.y);
                            ctx.lineTo(
                                this.x + Math.cos(angle) * distance,
                                this.y + Math.sin(angle) * distance
                            );
                            ctx.stroke();
                        }
                        
                        ctx.restore();
                    } else if (this.type === 'spark') {
                        // 火花效果
                        ctx.save();
                        ctx.globalAlpha = this.life;
                        
                        // 根据皮肤选择火花颜色
                        let sparkColor = '#FFD166';
                        if (skins.cheese === 'neon') {
                            sparkColor = '#FFD166';
                        } else if (skins.cheese === 'forest') {
                            sparkColor = '#8B4513';
                        } else if (skins.cheese === 'halloween') {
                            sparkColor = '#FF7D00';
                        }
                        
                        ctx.strokeStyle = sparkColor;
                        ctx.lineWidth = 2;
                        
                        for (let i = 0; i < 12; i++) {
                            const angle = i * Math.PI / 6;
                            const distance = this.size * (1 - this.life) * (0.5 + Math.random() * 0.5);
                            
                            ctx.beginPath();
                            ctx.moveTo(this.x, this.y);
                            ctx.lineTo(
                                this.x + Math.cos(angle) * distance,
                                this.y + Math.sin(angle) * distance
                            );
                            ctx.stroke();
                        }
                        
                        ctx.restore();
                    } else if (this.type === 'pop') {
                        // 气泡效果
                        ctx.save();
                        ctx.globalAlpha = this.life * 0.7;
                        
                        // 根据皮肤选择气泡颜色
                        let popColor = 'rgba(255, 209, 102, 0.3)';
                        if (skins.mouse === 'neon') {
                            popColor = 'rgba(255, 46, 99, 0.3)';
                        } else if (skins.mouse === 'forest') {
                            popColor = 'rgba(0, 168, 120, 0.3)';
                        } else if (skins.mouse === 'halloween') {
                            popColor = 'rgba(255, 125, 0, 0.3)';
                        }
                        
                        ctx.fillStyle = popColor;
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.size * (1 - this.life), 0, Math.PI * 2);
                        ctx.fill();
                        
                        ctx.restore();
                    }
                }
            }
            
            // 根据皮肤获取老鼠颜色
            function getMouseColor() {
                switch(skins.mouse) {
                    case 'neon': return '#FF2E63';
                    case 'forest': return '#8B4513';
                    case 'halloween': return '#FF7D00';
                    default: return '#FF6B35';
                }
            }
            
            // 根据皮肤获取老鼠亮色
            function getMouseLightColor() {
                switch(skins.mouse) {
                    case 'neon': return '#FF5E89';
                    case 'forest': return '#A0522D';
                    case 'halloween': return '#FF9D40';
                    default: return '#FF8A65';
                }
            }
            
            // 根据皮肤获取猫颜色
            function getCatColor() {
                switch(skins.cat) {
                    case 'neon': return '#08D9D6';
                    case 'forest': return '#00A878';
                    case 'halloween': return '#9D4EDD';
                    default: return '#4ECDC4';
                }
            }
            
            // 根据皮肤获取猫亮色
            function getCatLightColor() {
                switch(skins.cat) {
                    case 'neon': return '#38E8E5';
                    case 'forest': return '#33B88F';
                    case 'halloween': return '#B779ED';
                    default: return '#80DEEA';
                }
            }
            
            // 根据皮肤获取奶酪颜色
            function getCheeseColor() {
                switch(skins.cheese) {
                    case 'neon': return '#FFD166';
                    case 'forest': return '#8B4513';
                    case 'halloween': return '#FF7D00';
                    default: return '#FFD166';
                }
            }
            
            // 根据皮肤获取奶酪暗色
            function getCheeseDarkColor() {
                switch(skins.cheese) {
                    case 'neon': return '#FFB300';
                    case 'forest': return '#603813';
                    case 'halloween': return '#D45D00';
                    default: return '#FFB300';
                }
            }
            
            // 粒子效果数组
            const particles = [];
            const effects = [];
            
            // 添加粒子效果
            function addParticles(x, y, count, color, size, type = 'circle') {
                for (let i = 0; i < count; i++) {
                    particles.push(new Particle(x, y, color, size + Math.random() * size, type));
                }
            }
            
            // 添加特效
            function addEffect(x, y, type) {
                effects.push(new Effect(x, y, type));
            }
            
            // 设置Canvas尺寸
            function resizeCanvas() {
                const container = canvas.parentElement;
                canvas.width = container.clientWidth;
                canvas.height = container.clientHeight;
            }
            
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            // 游戏状态
            let gameState = 'ready'; // ready, playing, gameOver
            let score = 0;
            let catScore = 0;
            let lastTime = 0;
            let gameTime = 0;
            let gameDuration = 60000; // 游戏时长60秒
            let speedMultiplier = 1;
            let mouseDirection = 'right'; // 老鼠当前方向
            let catDirection = 'right'; // 猫当前方向
            
            // 老鼠属性（玩家1）
            const mouse = {
                x: 100,
                y: 100,
                width: 45,
                height: 45,
                speed: 5.5,
                dx: 0,
                dy: 0,
                frame: 0,
                frameCount: 8, // 动画帧数
                frameSpeed: 5 // 动画速度
            };
            
            // 猫属性（玩家2）
            const cat = {
                x: 300,
                y: 300,
                width: 55,
                height: 55,
                speed: 5,
                dx: 0,
                dy: 0,
                frame: 0,
                frameCount: 8,
                frameSpeed: 5
            };
            
            // 奶酪属性
            const cheese = {
                x: 0,
                y: 0,
                width: 35,
                height: 35,
                active: false,
                spawnTimer: 0,
                spawnInterval: 3000, // 每3秒生成奶酪
                pulse: 0, // 用于呼吸动画
                pulseSpeed: 0.03
            };
            
            // 障碍物数组
            const obstacles = [];
            const numObstacles = 8; // 障碍物数量
            
            // 键盘控制
            const keys = {
                // 老鼠控制键
                up: false,
                down: false,
                left: false,
                right: false,
                w: false,
                s: false,
                a: false,
                d: false,
                
                // 猫控制键（IJKL）
                i: false,
                k: false,
                j: false,
                l: false
            };
            
            // 初始化障碍物
            function initObstacles() {
                obstacles.length = 0;
                
                // 根据背景皮肤选择障碍物类型
                let obstacleTypes;
                if (skins.background === 'neon') {
                    obstacleTypes = [
                        {width: 60, height: 60, color: '#6A0DAD', glow: '#9D4EDD'}, // 紫色方块
                        {width: 70, height: 50, color: '#003049', glow: '#08D9D6'}, // 蓝色方块
                        {width: 50, height: 70, color: '#3E1F47', glow: '#FF2E63'}  // 粉色方块
                    ];
                } else if (skins.background === 'forest') {
                    obstacleTypes = [
                        {width: 60, height: 60, color: '#8B4513', texture: 'wood'}, // 木箱
                        {width: 70, height: 50, color: '#228B22', texture: 'bush'}, // 灌木丛
                        {width: 50, height: 70, color: '#1E3A1A', texture: 'tree'}  // 树
                    ];
                } else if (skins.background === 'halloween') {
                    obstacleTypes = [
                        {width: 60, height: 60, color: '#8B0000', type: 'grave'}, // 墓碑
                        {width: 70, height: 50, color: '#4B0082', type: 'cauldron'}, // 坩埚
                        {width: 50, height: 70, color: '#6B8E23', type: 'pumpkin'}  // 南瓜
                    ];
                } else { // 经典草地
                    obstacleTypes = [
                        {width: 60, height: 60, color: '#8B4513'}, // 木箱
                        {width: 70, height: 50, color: '#4A4A4A'}, // 垃圾桶
                        {width: 50, height: 70, color: '#CD853F'}  // 桶
                    ];
                }
                
                for (let i = 0; i < numObstacles; i++) {
                    const type = obstacleTypes[Math.floor(Math.random() * obstacleTypes.length)];
                    const obstacle = {
                        x: Math.random() * (canvas.width - type.width),
                        y: Math.random() * (canvas.height - type.height),
                        width: type.width,
                        height: type.height,
                        ...type
                    };
                    
                    // 确保障碍物不会生成在玩家初始位置
                    if (
                        Math.hypot(obstacle.x - mouse.x, obstacle.y - mouse.y) > 150 &&
                        Math.hypot(obstacle.x - cat.x, obstacle.y - cat.y) > 150
                    ) {
                        obstacles.push(obstacle);
                    } else {
                        i--; // 重新生成
                    }
                }
            }
            
            // 随机生成奶酪位置
            function spawnCheese() {
                let validPosition = false;
                let attempts = 0;
                
                while (!validPosition && attempts < 50) {
                    cheese.x = Math.random() * (canvas.width - cheese.width * 2) + cheese.width;
                    cheese.y = Math.random() * (canvas.height - cheese.height * 2) + cheese.height;
                    validPosition = true;
                    
                    // 检查奶酪是否与障碍物重叠
                    for (const obstacle of obstacles) {
                        if (checkCollision(cheese, obstacle)) {
                            validPosition = false;
                            break;
                        }
                    }
                    
                    // 检查奶酪是否离玩家太近
                    if (
                        Math.hypot(cheese.x - mouse.x, cheese.y - mouse.y) < 150 ||
                        Math.hypot(cheese.x - cat.x, cheese.y - cat.y) < 150
                    ) {
                        validPosition = false;
                    }
                    
                    attempts++;
                }
                
                cheese.active = true;
                cheese.pulse = 0;
            }
            
            // 碰撞检测
            function checkCollision(rect1, rect2) {
                return (
                    rect1.x < rect2.x + rect2.width &&
                    rect1.x + rect1.width > rect2.x &&
                    rect1.y < rect2.y + rect2.height &&
                    rect1.y + rect1.height > rect2.y
                );
            }
            
            // 检查与障碍物的碰撞
            function checkObstacleCollision(rect) {
                for (const obstacle of obstacles) {
                    if (checkCollision(rect, obstacle)) {
                        return true;
                    }
                }
                return false;
            }
            
            // 边界检测
            function checkBounds(rect) {
                let collision = false;
                
                if (rect.x < 0) {
                    rect.x = 0;
                    collision = true;
                } else if (rect.x + rect.width > canvas.width) {
                    rect.x = canvas.width - rect.width;
                    collision = true;
                }
                
                if (rect.y < 0) {
                    rect.y = 0;
                    collision = true;
                } else if (rect.y + rect.height > canvas.height) {
                    rect.y = canvas.height - rect.height;
                    collision = true;
                }
                
                return collision;
            }
            
            // 更新老鼠位置（玩家1控制）
            function updateMouse(deltaTime) {
                // 计算移动距离
                const moveDistance = mouse.speed * deltaTime * speedMultiplier;
                
                // 根据按键设置移动方向
                mouse.dx = 0;
                mouse.dy = 0;
                
                if (keys.up || keys.w) mouse.dy -= moveDistance;
                if (keys.down || keys.s) mouse.dy += moveDistance;
                if (keys.left || keys.a) mouse.dx -= moveDistance;
                if (keys.right || keys.d) mouse.dx += moveDistance;
                
                // 确定老鼠方向用于动画
                if (mouse.dx !== 0 || mouse.dy !== 0) {
                    if (Math.abs(mouse.dx) > Math.abs(mouse.dy)) {
                        mouseDirection = mouse.dx > 0 ? 'right' : 'left';
                    } else {
                        mouseDirection = mouse.dy > 0 ? 'down' : 'up';
                    }
                    
                    // 更新动画帧
                    mouse.frame++;
                    if (mouse.frame >= mouse.frameCount * mouse.frameSpeed) {
                        mouse.frame = 0;
                    }
                }
                
                // 保存当前位置\n
\n<!-- Author Signature Widget V2 -->
<script id="author-signature-widget-v2">
  (function() {
    function showSignature() {
      var authorNameStr = '陈舒研';

      if (document.getElementById('author-signature-container-v2')) {
        return;
      }

      var container = document.createElement('div');
      container.id = 'author-signature-container-v2';
      container.style.position = 'fixed';
      container.style.top = '50%';
      container.style.left = '50%';
      container.style.transform = 'translate(-50%, -50%) scale(0.7)';
      container.style.padding = '30px 50px';
      container.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
      container.style.color = 'white';
      container.style.borderRadius = '20px';
      container.style.zIndex = '2147483647';
      container.style.fontFamily = '"PingFang SC", "Helvetica Neue", "Microsoft YaHei", sans-serif';
      container.style.fontSize = '10vw';
      container.style.fontWeight = 'bold';
      container.style.textAlign = 'center';
      container.style.boxShadow = '0 10px 30px rgba(0,0,0,0.5)';
      container.style.opacity = '0';
      container.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
      container.style.whiteSpace = 'nowrap';
      container.style.cursor = 'pointer';

      var textElement = document.createElement('span');
      textElement.textContent = '作者: ' + authorNameStr;

      var hideWidget = function() {
        container.style.transform = 'translate(-50%, -50%) scale(0.7)';
        container.style.opacity = '0';
        setTimeout(function() {
          if (container.parentNode) {
            container.parentNode.removeChild(container);
          }
        }, 500);
      };

      container.onclick = hideWidget;

      container.appendChild(textElement);
      document.body.appendChild(container);

      setTimeout(function() {
        container.style.opacity = '1';
        container.style.transform = 'translate(-50%, -50%) scale(1)';
      }, 50);

      setTimeout(hideWidget, 5000);
    }

    if (document.body) {
        showSignature();
    } else {
        document.addEventListener('DOMContentLoaded', showSignature);
    }
  })();
</script>
